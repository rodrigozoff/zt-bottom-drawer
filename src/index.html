<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <title>Stencil Component Starter</title>
  <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
  <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" />
  <script type="module" src="/build/zt-bottom-drawer.esm.js"></script>
  <script nomodule src="/build/zt-bottom-drawer.js"></script>
  <style>
    .lds-ripple {
      display: inline-block;
      position: relative;
      width: 80px;
      height: 80px;
    }

    .lds-ripple div {
      position: absolute;
      border: 4px solid rgb(8, 98, 158);
      opacity: 1;
      border-radius: 50%;
      animation: lds-ripple 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;
    }

    .lds-ripple div:nth-child(2) {
      animation-delay: -0.5s;
    }

    @keyframes lds-ripple {
      0% {
        top: 36px;
        left: 36px;
        width: 0;
        height: 0;
        opacity: 1;
      }

      100% {
        top: 0px;
        left: 0px;
        width: 72px;
        height: 72px;
        opacity: 0;
      }
    }

    #loader {
      z-index: 10000000000;
      position: absolute;
      display: block;
      left: calc(calc(100% / 2) - 40px);
    }

    zt-bottom-drawer {
      z-index: 100000;
      margin-left: 10px;
      margin-right: 10px;
      width: calc(100% - 20px);

      -webkit-box-shadow: 0px -3px 7px 0px #383434e7;
      box-shadow: 0px -3px 7px 0px #383434e7;
    }

    zt-nav {
      z-index: 10000;
    }
  </style>
</head>
</head>

<body style="overflow: hidden; height: 100vh;" class="dark md">
  <div id="loader">
    <div></div>
    <div></div>
  </div>
  <zt-bottom-drawer id="drawer" hide-on-position-zero=true
    position-name="bottom" positions="close-b-10,bottom-b-207,middle-b-400,top-t-60">
  </zt-bottom-drawer>
  <zt-nav id="ztNav">
  </zt-nav>
  <script>

    techs = [
      {
        'title': 'Angular / Open Top',
        'icon': 'angular',
        'description': 'A powerful Javascript framework for building single page apps. Angular is open source, and maintained by Google.',
        'color': '#E63135',
        'position_drawer': 'top'
      },
      {
        'title': 'CSS3 / Open middle',
        'icon': 'css3',
        'description': 'The latest version of cascading stylesheets - the styling language of the web!',
        'color': '#0CA9EA',
        'position_drawer': 'middle'
      },
      {
        'title': 'HTML5 / Open bottom',
        'icon': 'html5',
        'description': 'The latest version of the web\'s markup language.',
        'color': '#F46529',
        'position_drawer': 'bottom'
      },
      {
        'title': 'JavaScript',
        'icon': 'javascript',
        'description': 'One of the most popular programming languages on the Web!',
        'color': '#FFD439'
      },
      {
        'title': 'Sass',
        'icon': 'sass',
        'description': 'Syntactically Awesome Stylesheets - a mature, stable, and powerful professional grade CSS extension.',
        'color': '#CE6296'
      },
      {
        'title': 'NodeJS',
        'icon': 'nodejs',
        'description': 'An open-source, cross-platform runtime environment for developing server-side Web applications.',
        'color': '#78BD43'
      },
      {
        'title': 'Python',
        'icon': 'python',
        'description': 'A clear and powerful object-oriented programming language!',
        'color': '#3575AC'
      },
      {
        'title': 'Markdown',
        'icon': 'markdown',
        'description': 'A super simple way to add formatting like headers, bold, bulleted lists, and so on to plain text.',
        'color': '#412159'
      },
      {
        'title': 'Tux',
        'icon': 'tux',
        'description': 'The official mascot of the Linux kernel!',
        'color': '#000'
      }, {
        'title': 'Angular',
        'icon': 'angular',
        'description': 'A powerful Javascript framework for building single page apps. Angular is open source, and maintained by Google.',
        'color': '#E63135'
      },
      {
        'title': 'CSS3',
        'icon': 'css3',
        'description': 'The latest version of cascading stylesheets - the styling language of the web!',
        'color': '#0CA9EA'
      },
      {
        'title': 'HTML5',
        'icon': 'html5',
        'description': 'The latest version of the web\'s markup language.',
        'color': '#F46529'
      },
      {
        'title': 'JavaScript',
        'icon': 'javascript',
        'description': 'One of the most popular programming languages on the Web!',
        'color': '#FFD439'
      },
      {
        'title': 'Sass',
        'icon': 'sass',
        'description': 'Syntactically Awesome Stylesheets - a mature, stable, and powerful professional grade CSS extension.',
        'color': '#CE6296'
      },
      {
        'title': 'NodeJS',
        'icon': 'nodejs',
        'description': 'An open-source, cross-platform runtime environment for developing server-side Web applications.',
        'color': '#78BD43'
      },
      {
        'title': 'Python',
        'icon': 'python',
        'description': 'A clear and powerful object-oriented programming language!',
        'color': '#3575AC'
      },
      {
        'title': 'Markdown',
        'icon': 'markdown',
        'description': 'A super simple way to add formatting like headers, bold, bulleted lists, and so on to plain text.',
        'color': '#412159'
      },
      {
        'title': 'Tux',
        'icon': 'tux',
        'description': 'The official mascot of the Linux kernel!',
        'color': '#000'
      }, {
        'title': 'Angular',
        'icon': 'angular',
        'description': 'A powerful Javascript framework for building single page apps. Angular is open source, and maintained by Google.',
        'color': '#E63135'
      },
      {
        'title': 'CSS3',
        'icon': 'css3',
        'description': 'The latest version of cascading stylesheets - the styling language of the web!',
        'color': '#0CA9EA'
      },
      {
        'title': 'HTML5',
        'icon': 'html5',
        'description': 'The latest version of the web\'s markup language.',
        'color': '#F46529'
      },
      {
        'title': 'JavaScript',
        'icon': 'javascript',
        'description': 'One of the most popular programming languages on the Web!',
        'color': '#FFD439'
      },
      {
        'title': 'Sass',
        'icon': 'sass',
        'description': 'Syntactically Awesome Stylesheets - a mature, stable, and powerful professional grade CSS extension.',
        'color': '#CE6296'
      },
      {
        'title': 'NodeJS',
        'icon': 'nodejs',
        'description': 'An open-source, cross-platform runtime environment for developing server-side Web applications.',
        'color': '#78BD43'
      },
      {
        'title': 'Python',
        'icon': 'python',
        'description': 'A clear and powerful object-oriented programming language!',
        'color': '#3575AC'
      },
      {
        'title': 'Markdown',
        'icon': 'markdown',
        'description': 'A super simple way to add formatting like headers, bold, bulleted lists, and so on to plain text.',
        'color': '#412159'
      },
      {
        'title': 'Tux',
        'icon': 'tux',
        'description': 'The official mascot of the Linux kernel!',
        'color': '#000'
      },
    ];

    customElements.define('nav-home', class NavHome extends HTMLElement {
      connectedCallback() {
        this.innerHTML = `
          <ion-header translucent>
            <ion-toolbar>
              <ion-title>Nav v21</ion-title>
            </ion-toolbar>
          </ion-header>
          <ion-content>
            <ion-list>
            ${techs.map(tech => `
                <ion-item button onclick="showDetail('${tech.title}')">
                  <ion-icon slot="start" name="logo-${tech.icon}" style="color: ${tech.color};"></ion-icon>
                  <ion-label>
                    <h3>${tech.title}</h3>
                  </ion-label>
                </ion-item>
            `).join('\n')}
            </ion-list>
          </ion-content>
        `;
      }
    });

    async function showDetail(title) {
      const tech = techs.find(tech => tech.title === title);
      let drawer = document.getElementById("drawer");
      if (tech.position_drawer) {
        drawer.setAttribute("position-name", tech.position_drawer);
      }
 
      let resultNav = await drawer.pushNav('nav-detail', { tech }, null, ".contenedor");
      console.log("Result nav ", tech, resultNav);
    }

    customElements.define('nav-detail', class NavDetail extends HTMLElement {
      connectedCallback() {
        this.innerHTML = `
          <ion-header translucent>
            <ion-toolbar>
              <ion-buttons slot="start">
                <ion-back-button defaultHref="/"></ion-back-button>
              </ion-buttons>
              <ion-title>${this.tech.title}</ion-title>
            </ion-toolbar>
          </ion-header>
          <ion-content >
            <ion-item>
            <ion-icon name="logo-${this.tech.icon}" style="color: ${this.tech.color};" size="large"></ion-icon>
            <p>${this.tech.description}</p>
            </ion-item>
            <ion-item>
            <ion-icon name="logo-${this.tech.icon}" style="color: ${this.tech.color};" size="large"></ion-icon>
            <p>${this.tech.description}</p>
            </ion-item>
            <ion-item>
            <ion-icon name="logo-${this.tech.icon}" style="color: ${this.tech.color};" size="large"></ion-icon>
            <p>${this.tech.description}</p>
            </ion-item>
            <ion-item>
            <ion-icon name="logo-${this.tech.icon}" style="color: ${this.tech.color};" size="large"></ion-icon>
            <p>${this.tech.description}</p>
            </ion-item>
            <ion-item>
            <ion-icon name="logo-${this.tech.icon}" style="color: ${this.tech.color};" size="large"></ion-icon>
            <p>${this.tech.description}</p>
            </ion-item>
            <ion-item>
            <ion-icon name="logo-${this.tech.icon}" style="color: ${this.tech.color};" size="large"></ion-icon>
            <p>${this.tech.description}</p>
            </ion-item>
            <ion-item>
            <ion-icon name="logo-${this.tech.icon}" style="color: ${this.tech.color};" size="large"></ion-icon>
            <p>${this.tech.description}</p>
            </ion-item>
            <ion-item>
            <ion-icon name="logo-${this.tech.icon}" style="color: ${this.tech.color};" size="large"></ion-icon>
            <p>${this.tech.description}</p>
            </ion-item>
            <ion-item>
            <ion-icon name="logo-${this.tech.icon}" style="color: ${this.tech.color};" size="large"></ion-icon>
            <p>${this.tech.description}</p>
            </ion-item>
            <ion-item>
            <ion-icon name="logo-${this.tech.icon}" style="color: ${this.tech.color};" size="large"></ion-icon>
            <p>${this.tech.description}</p>
            </ion-item>
            <ion-item>
            <ion-icon name="logo-${this.tech.icon}" style="color: ${this.tech.color};" size="large"></ion-icon>
            <p>${this.tech.description}</p>
            </ion-item>
            <ion-item>
            <ion-icon name="logo-${this.tech.icon}" style="color: ${this.tech.color};" size="large"></ion-icon>
            <p>ULTIMO - ${this.tech.description}</p>
            </ion-item>
          </div>
        `;
      }

      async canDeactivatePositionDrawer(currentProsition, newPosition) {
        console.log(currentProsition, newPosition);
        return false;
      }

      async canActivatePositionDrawer(newPosition, lastPosition) {
        console.log(newPosition, lastPosition);
        return true;
      }
    });

    window.onload = () => {
      let ztNav = document.getElementById("ztNav");
      ztNav.pushNav("nav-home", {});

      let drawer = document.getElementById("drawer");
      drawer.pushNav("nav-home", {});

 //     drawer.setAttribute("disableGesture", true);
 //     drawer.setAttribute("forceScrollY", true);

      drawer.addEventListener("hideEvent", () => {
        setTimeout(() => {
          drawer.show("middle");
        }, 2000);
      });

      drawer.addEventListener("changePositionEvent", () => { console.log("change position") });

      drawer.addCallbackCanDeactivateState((postionName, newPositionName, htmlElements) => {
        console.log("DeactivateState", postionName, htmlElements);
        return true;
      });

      drawer.addCallbackCanActivateState((postionName, oldPostionName, htmlElements) => {
        console.log("ActivateState", postionName, htmlElements);
        /* if (postionName === "top") {
           return new Promise((resolve) => {
             document.getElementById("loader").classList.add("lds-ripple");
             setTimeout(() => {
               document.getElementById("loader").classList.remove("lds-ripple");
               let resultRandom = Math.random();
               console.log(resultRandom > 0.5 ? "Can Activate" : "Can't Activate");
               resolve(resultRandom > 0.5 ? true : false);
             }, 1000 * (Math.random() * (3 - 1) + 1));
           });
         }*/
        return true;
      });
    }
  </script>
</body>

</html>